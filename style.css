
:root{
  /* Palette màu */
  --c1: #1B4079; /* primary */
  --c2: #4D7C8A; /* secondary */
  --c3: #7F9C96; /* neutral */
  --c4: #8FAD88; /* accent */
  --c5: #CBDF90; /* light accent */

  --bg: #F7FAF6;
  --text: #0f172a;
  --muted: #334155;

  --panel: #EAF2E5;
  --card: #FFFFFF;

  --btn: var(--c1);
  --btn-hover: var(--c2);
  --btn-active: #163565;

  --shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
  --radius: 14px;
}

*{ box-sizing: border-box; }

body{
  font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  min-height: 100vh;
}

/* background video */
.bg-video{
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  z-index: -1;
}

.page{
  width: min(1100px, calc(100% - 32px));
  margin: 0 auto;
  padding: 24px 0 20px;

  /* chia layout TOP / MIDDLE / BOTTOM */
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Top-left block */
.topbar{
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
}

.brand{
  display: flex;
  gap: 14px;
  align-items: center;
  padding: 14px 16px;
  border-radius: var(--radius);
  background: var(--card);
  box-shadow: var(--shadow);
  border: 1px solid rgba(79, 124, 138, 0.18);
}

.logo{
  width: 56px;
  height: 56px;
  object-fit: contain;
}

.brand-text{
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.school-name{
  font-weight: 800;
  letter-spacing: 0.3px;
  font-size: 14px;
  line-height: 1.2;
  color: var(--c1);
}

.members{
  font-size: 13px;
  color: var(--muted);
}

.members span{
  font-weight: 700;
  color: var(--c2);
}

/* =========================
   MIDDLE: WORK AREA
========================= */
.workarea{
  display: flex;
  align-items: center;     /* canh giữa theo chiều dọc */
}

.work-shell{
  width: 100%;
  min-height: 450px;
  border-radius: calc(var(--radius) + 10px);
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(127, 156, 150, 0.25);
  box-shadow: var(--shadow);
  backdrop-filter: blur(6px);
  padding: 14px;
  position: relative;
  overflow: hidden;
}

.workspace-content h2{
  font-weight: 500;   /* siêu đậm */
}

/* các panel (4 ô trống) */
.panel{
  display: none;
  height: 100%;
}

.panel.is-active{
  display: block;
}

.panel-inner{
  border-radius: calc(var(--radius) + 6px);
  background: linear-gradient(180deg, var(--panel), rgba(203,223,144,0.35));
  border: 1px solid rgba(127, 156, 150, 0.22);
  box-shadow: 0 10px 18px rgba(15, 23, 42, 0.10);
  padding: 14px;
  min-height: 550px;

  display: flex;
  flex-direction: column;
  gap: 10px;
}

.panel-inner h2{
  margin: 0;
  color: var(--c1);
  font-size: 22px;
  font-weight: 900;
}

.panel-inner p{
  margin: 0;
  color: var(--muted);
  font-weight: 500;
}

/* =========================
   BOTTOM: HERO (title + buttons)
========================= */
.hero{
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;

  padding: 22px 18px 20px;
  border-radius: calc(var(--radius) + 6px);
  background: linear-gradient(180deg, var(--panel), rgba(203,223,144,0.45));
  box-shadow: var(--shadow);
  border: 1px solid rgba(127, 156, 150, 0.25);
}

/* đẩy khối hero xuống gần đáy */
.hero--bottom{
  margin-top: auto;
}

.topic{
  margin: 0;
  font-size: clamp(18px, 2.6vw, 30px);
  font-weight: 800;
  color: var(--c1);
  text-align: center;
  letter-spacing: 0.4px;
}

/* 4 buttons */
.ds-buttons{
  margin: 18px auto 0; /* tạo khoảng cách với description */
  display: grid;
  grid-template-columns: repeat(4, minmax(160px, 1fr));
  gap: 15px;
  width: min(900px, 100%);
}

.ds-btn{
  padding: 12px 14px;
  border: 1px solid rgba(255,255,255,0.25);
  border-radius: 12px;
  cursor: pointer;

  background: var(--btn);
  color: #fff;

  font-size: 16px;
  font-weight: 800;

  transition: transform .12s ease, background-color .2s ease, box-shadow .2s ease;
  box-shadow: 0 10px 18px rgba(27, 64, 121, 0.22);
}

.ds-btn:hover{
  background: var(--btn-hover);
  transform: translateY(-1px);
  box-shadow: 0 12px 22px rgba(77, 124, 138, 0.25);
}

.ds-btn:active{
  background: var(--btn-active);
  transform: translateY(0px) scale(0.99);
}

.ds-btn.active{
  background: var(--c4);
  color: #0b1220;
  border-color: rgba(27, 64, 121, 0.15);
  box-shadow: 0 12px 22px rgba(143, 173, 136, 0.35);
}

@media (max-width: 900px){
  .ds-buttons{
    grid-template-columns: repeat(2, minmax(160px, 1fr));
  }
}

@media (max-width: 460px){
  .brand{ width: 100%; }
  .ds-buttons{ grid-template-columns: 1fr; }
  .work-shell{ padding: 14px; }
}

/* Style cho nút [x] đóng cửa sổ*/
.panel-inner{
  position: relative; /* để nút X bám góc */
}

.panel-close{
  position: absolute;
  top: 10px;
  right: 10px;

  width: 34px;
  height: 34px;
  border-radius: 10px;

  border: 1px solid rgba(15, 23, 42, 0.12);
  background: rgba(255,255,255,0.55);
  backdrop-filter: blur(6px);

  cursor: pointer;
  font-size: 22px;
  font-weight: 800;
  line-height: 1;
  color: var(--c1);

  box-shadow: 0 10px 18px rgba(15, 23, 42, 0.10);
  transition: transform .12s ease, background-color .2s ease;
}

.panel-close:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,0.75);
}

.panel-close:active{
  transform: scale(0.98);
}

/* Sources và Credit */
.workspace-footer{
  margin-top: 18px;            /* đẩy xuống đáy panel */
  padding-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  text-align: center;
}

.workspace-source{
  font-size: 12px;
  color: #64748b;
  opacity: 0.85;
}

.workspace-source a{
  color: var(--c2);
  font-weight: 600;
  text-decoration: none;
}

.workspace-source a:hover{
  text-decoration: underline;
}

.workspace-credit{
  font-size: 12px;
  color: #475569;
  font-weight: 500;
  line-height: 1.4;
  opacity: 0.9;
}

/* Center description */
/* ===== Center welcome content ===== */
.panel-inner--centered{
  display: grid;
  height: 100%;
  grid-template-rows: 1fr auto 1fr;
  align-items: center;
}

/* Khối nội dung chính nằm giữa */
.workspace-content{
  margin: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  gap: 10px;

  /* QUAN TRỌNG: bỏ flex:1 đi (nó đang làm hỏng bố cục) */
  flex: unset;
  grid-row: 1;
  align-self: center;
}

/* Giữ footer luôn ở đáy */
.workspace-footer{
  grid-row: 3;
  align-self: end;
  margin-top: 0;
}

/* Linked List elements */
.ll-type-buttons{
  display: grid;
  grid-template-columns: repeat(3, minmax(180px, 1fr));
  gap: 14px;
  width: min(900px, 100%);
  margin-top: 10px;
}

.ll-btn{
  padding: 12px 14px;
  border: 1px solid rgba(255,255,255,0.25);
  border-radius: 12px;
  cursor: pointer;

  background: var(--btn);
  color: #fff;

  font-size: 15px;
  font-weight: 800;

  transition: transform .12s ease, background-color .2s ease, box-shadow .2s ease;
  box-shadow: 0 10px 18px rgba(27, 64, 121, 0.22);
}

.ll-btn:hover{
  background: var(--btn-hover);
  transform: translateY(-1px);
  box-shadow: 0 12px 22px rgba(77, 124, 138, 0.25);
}

.ll-btn:active{
  background: var(--btn-active);
  transform: translateY(0px) scale(0.99);
}

@media (max-width: 900px){
  .ll-type-buttons{
    grid-template-columns: 1fr;
  }
}

/* ===== Linked List UI (toolbar + canvas) ===== */
.ll-toolbar{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  padding: 10px;
  border-radius: 12px;
  background: rgba(15, 23, 42, 0.12);
}

.ll-toolbar label{
  font-weight: 800;
  color: #0f172a;
  opacity: 0.9;
}

.ll-input{
  width: 120px;
  padding: 10px 10px;
  border-radius: 10px;
  border: 1px solid rgba(15,23,42,.18);
  background: rgba(255,255,255,.65);
  outline: none;
  font-weight: 700;
}

.ll-btn-op{
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.25);
  background: var(--btn);
  color: #fff;
  cursor: pointer;
  font-weight: 800;
}

.ll-btn-op:hover{ background: var(--btn-hover); }
.ll-btn-op.danger{ background: #8b2f2f; }
.ll-btn-op.danger:hover{ background: #a73a3a; }
.ll-btn-op.ghost{
  background: rgba(255,255,255,.55);
  color: var(--c1);
  border: 1px solid rgba(15,23,42,.14);
}

.ll-status{
  margin-top: 10px;
  font-weight: 700;
  color: #0f172a;
  opacity: .85;
  white-space: pre-line;
  max-height: 60px;
  overflow: auto;
}

.ll-canvas{
  margin-top: 12px;
  flex: 1;
  padding: 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.45);
  border: 1px solid rgba(127,156,150,0.25);
  overflow: auto;
}

/* ===== Circular arrow overlay ===== */
.ll-canvas--rel{
  position: relative; /* để svg overlay bám theo */
}

/* svg phủ lên nội dung canvas, không chặn click */
.ll-circular-svg{
  position: absolute;
  left: 0;
  top: 0;
  pointer-events: none;
  overflow: visible;
  z-index: 2;
}

/* đường mũi tên */
.ll-circular-svg__path{
  fill: none;
  stroke: rgba(27, 64, 121, 0.75);
  stroke-width: 3;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* đầu mũi tên */
.ll-circular-svg__head{
  fill: rgba(27, 64, 121, 0.75);
}

.ll-info{
  font-weight: 800;
  color: #0f172a;
  opacity: .75;
  margin-bottom: 10px;
}

/* chừa chỗ dưới để vẽ mũi tên vòng ngoài */
.ll-circular-spacer{
  height: 60px;
}

.ll-row{
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.ll-node{
  min-width: 120px;
  padding: 10px;
  border-radius: 12px;
  background: rgba(27,64,121,0.14);
  border: 1px solid rgba(27,64,121,0.22);
}

/* Animation cho Linked List */
.ll-node{
  will-change: transform, opacity;
  transform-origin: center;
}

/* Pop-in node mới */
.ll-node.is-enter{
  opacity: 0;
  transform: scale(0.6) translateY(-8px);
}

/* Pop-out node cũ */
.ll-node.is-leave{
  opacity: 0;
  transform: scale(0.75) translateY(8px);
}

/* Đang có animation thì tránh spam click */
.ll-ui.is-busy .ll-btn-op{
  pointer-events: none;
  opacity: 0.7;
}

/* Highlight khi duyệt node */
.ll-node.is-hl{
  border-color: rgba(27, 64, 121, 0.65);
  box-shadow: 0 10px 18px rgba(27,64,121,0.18);
  transform: scale(1.03);
}

.ll-node.is-hl .ll-cell--data{
  outline: 2px solid rgba(27, 64, 121, 0.55);
}

@keyframes llPulse{
  0%{ transform: scale(1.00); }
  50%{ transform: scale(1.05); }
  100%{ transform: scale(1.00); }
}

.ll-node.is-pulse{
  animation: llPulse .35s ease;
}


.ll-id{
  font-size: 12px;
  font-weight: 900;
  color: var(--c1);
  opacity: .8;
  margin-bottom: 6px;
}

.ll-cells{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(60px, 1fr);
  gap: 8px;
}

.ll-cell{
  padding: 10px 8px;
  border-radius: 10px;
  text-align: center;
  font-weight: 900;
  border: 1px solid rgba(15,23,42,0.12);
  background: rgba(255,255,255,0.65);
}

.ll-cell--data{ }
.ll-cell--ptr{
  background: rgba(203,223,144,0.55);
}

.ll-arrow{
  font-size: 22px;
  font-weight: 900;
  color: var(--c1);
  opacity: 0.7;
}

.ll-empty{
  font-weight: 800;
  color: #334155;
  opacity: .8;
}

.ll-circular-hint{
  margin-top: 10px;
  font-weight: 800;
  opacity: .8;
}

/* ===== Select Data Structure block ===== */
.ds-select{
  grid-row: 2;                 /* nằm ở hàng giữa panel */
  justify-self: center;
  text-align: center;

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

/* Title */
.ds-title{
  margin: 0;
  font-size: 22px;
  font-weight: 900;
  color: var(--c1);
}

/* Subtitle */
.ds-desc{
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: var(--muted);
  max-width: 600px;
}

/* Buttons */
.ds-buttons{
  margin-top: 16px;
  display: grid;
  grid-template-columns: repeat(4, minmax(160px, 1fr));
  gap: 16px;
  width: min(900px, 100%);
}

/* =========================
   STACK UI (added - safe)
   (Does not affect Linked List)
========================= */
.stack-canvas{
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.stack-info{
  font-weight: 900;
  color: #0f172a;
  opacity: .75;
}

.stack-col{
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: flex-start;
}

.stack-top-badge{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 900;
  color: var(--c1);
  background: rgba(27,64,121,0.10);
  border: 1px solid rgba(27,64,121,0.18);
}

.stack-item{
  min-width: 220px;
  padding: 10px;
  border-radius: 12px;
  background: rgba(27,64,121,0.14);
  border: 1px solid rgba(27,64,121,0.22);
}

.stack-item__id{
  font-size: 12px;
  font-weight: 900;
  color: var(--c1);
  opacity: .8;
  margin-bottom: 6px;
}

.stack-item__val{
  padding: 10px 8px;
  border-radius: 10px;
  text-align: center;
  font-weight: 900;
  border: 1px solid rgba(15,23,42,0.12);
  background: rgba(255,255,255,0.65);
}

/* ===== Stack animation ===== */
.stack-ui.is-busy .stack-btn-op{
  pointer-events: none;
  opacity: 0.7;
}

.stack-item{
  will-change: transform, opacity;
  transform-origin: center;
}

/* pop-in */
.stack-item.is-enter{
  opacity: 0;
  transform: scale(0.6) translateY(-8px);
}

/* pop-out */
.stack-item.is-leave{
  opacity: 0;
  transform: scale(0.75) translateY(8px);
  transition: transform 260ms ease, opacity 260ms ease;
}

/* highlight */
.stack-item.is-hl{
  border-color: rgba(27, 64, 121, 0.65);
  box-shadow: 0 10px 18px rgba(27,64,121,0.18);
  transform: scale(1.03);
}

@keyframes stPulse{
  0%{ transform: scale(1.00); }
  50%{ transform: scale(1.05); }
  100%{ transform: scale(1.00); }
}
.stack-item.is-pulse{
  animation: stPulse .35s ease;
}

/* Stack status: cho phép xuống dòng + scroll */
.stack-status{
  white-space: pre-line;
  max-height: 60px;       /* tuỳ bạn */
  overflow: auto;
  padding-right: 6px;
}

/* QUEUE UI */
.queue-canvas{
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.queue-info{
  font-weight: 900;
  color: #0f172a;
  opacity: .75;
}

.queue-badges{
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.queue-badge{
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 900;
  color: var(--c1);
  background: rgba(27,64,121,0.10);
  border: 1px solid rgba(27,64,121,0.18);
}

.queue-row{
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.queue-node{
  min-width: 140px;
  padding: 10px;
  border-radius: 12px;
  background: rgba(27,64,121,0.14);
  border: 1px solid rgba(27,64,121,0.22);

  will-change: transform, opacity;
  transform-origin: center;
}

.queue-node__id{
  font-size: 12px;
  font-weight: 900;
  color: var(--c1);
  opacity: .8;
  margin-bottom: 6px;
}

.queue-node__val{
  padding: 10px 8px;
  border-radius: 10px;
  text-align: center;
  font-weight: 900;
  border: 1px solid rgba(15,23,42,0.12);
  background: rgba(255,255,255,0.65);
}

.queue-arrow{
  font-size: 22px;
  font-weight: 900;
  color: var(--c1);
  opacity: 0.7;
}

/* Busy lock */
.queue-ui.is-busy .queue-btn-op{
  pointer-events: none;
  opacity: 0.7;
}

/* pop-in */
.queue-node.is-enter{
  opacity: 0;
  transform: scale(0.6) translateY(-8px);
}

/* pop-out */
.queue-node.is-leave{
  opacity: 0;
  transform: scale(0.75) translateY(8px);
  transition: transform 260ms ease, opacity 260ms ease;
}

/* highlight */
.queue-node.is-hl{
  border-color: rgba(27, 64, 121, 0.65);
  box-shadow: 0 10px 18px rgba(27,64,121,0.18);
  transform: scale(1.03);
}

@keyframes qPulse{
  0%{ transform: scale(1.00); }
  50%{ transform: scale(1.05); }
  100%{ transform: scale(1.00); }
}

.queue-node.is-pulse{
  animation: qPulse .35s ease;
}

/* TREE UI */
.tree-canvas{
  position: relative;
  min-height: 420px;
  overflow: auto;
}

.tree-info{
  font-weight: 900;
  color: #0f172a;
  opacity: .75;
  margin-bottom: 8px;
}

.tree-svg{
  position: absolute;
  left: 0; top: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.tree-line{
  stroke: rgba(27, 64, 121, 0.55);
  stroke-width: 3;
  stroke-linecap: round;
}

.tree-node{
  position: absolute;
  transform: translate(-50%, -50%);
  width: 78px;
  height: 78px;
  border-radius: 999px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  background: rgba(27,64,121,0.14);
  border: 1px solid rgba(27,64,121,0.25);

  will-change: transform, opacity;
  transform-origin: center;
  z-index: 5;
}

.tree-node__val{
  font-weight: 900;
  font-size: 16px;
  color: #0f172a;
}

.tree-node__id{
  font-weight: 900;
  font-size: 11px;
  color: var(--c1);
  opacity: .75;
}

/* busy lock */
.tree-ui.is-busy .tree-btn-op{
  pointer-events: none;
  opacity: 0.7;
}

/* pop-in / pop-out */
.tree-node.is-enter{
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.6);
}

.tree-node.is-leave{
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.75);
  transition: transform 260ms ease, opacity 260ms ease;
}

/* highlight + pulse */
.tree-node.is-hl{
  border-color: rgba(27, 64, 121, 0.70);
  box-shadow: 0 12px 22px rgba(27,64,121,0.18);
}

@keyframes treePulse{
  0%{ transform: translate(-50%, -50%) scale(1.00); }
  50%{ transform: translate(-50%, -50%) scale(1.08); }
  100%{ transform: translate(-50%, -50%) scale(1.00); }
}
.tree-node.is-pulse{
  animation: treePulse .35s ease;
}

/* ===== Queue buttons ===== */
.queue-btn-op{
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.25);
  background: var(--btn);
  color: #fff;
  cursor: pointer;
  font-weight: 800;
  transition: background-color .2s ease, transform .12s ease;
}

.queue-btn-op:hover{
  background: var(--btn-hover);
  transform: translateY(-1px);
}

.queue-btn-op:active{
  background: var(--btn-active);
  transform: scale(0.98);
}

/* ===== Ghost button (Clear) ===== */
.queue-btn-op.ghost{
  background: rgba(255,255,255,0.65);
  color: var(--c1);
  border: 1px dashed rgba(27, 64, 121, 0.35);
}

.queue-btn-op.ghost:hover{
  background: rgba(255,255,255,0.85);
  color: var(--btn-hover);
}

/* ===== Binary Tree buttons ===== */
.tree-btn-op{
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.25);
  background: var(--btn);
  color: #fff;
  cursor: pointer;
  font-weight: 800;
  transition: background-color .2s ease, transform .12s ease;
}

.tree-btn-op:hover{
  background: var(--btn-hover);
  transform: translateY(-1px);
}

.tree-btn-op:active{
  background: var(--btn-active);
  transform: scale(0.98);
}

/* ===== Ghost button (Clear Tree) ===== */
.tree-btn-op.ghost{
  background: rgba(255,255,255,0.65);
  color: var(--c1);
  border: 1px dashed rgba(27, 64, 121, 0.35);
}

.tree-btn-op.ghost:hover{
  background: rgba(255,255,255,0.85);
  color: var(--btn-hover);
}


